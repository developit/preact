<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Text Updates</title>
	</head>
	<body>
		<div id="root"></div>
		<script type="module">
			import { measureName, measureMemory } from './util.js';
			import * as framework from 'framework';

			let { createRoot, createElement } = framework;
			let createVNode = framework.createVNode;

			const root = createRoot(document.getElementById('root'));

			function component1({ randomValue }) {
				return createElement('div', {}, [
					createElement('h2', {}, 'Test ' + randomValue),
					createElement('h1', {}, `===${randomValue}===`)
				]);
			}

			function component2({ randomValue }) {
				return createVNode(
					'div',
					{
						children: [
							createVNode(
								'h2',
								{ children: 'Test ' + randomValue },
								null,
								null,
								null
							),
							createVNode(
								'h1',
								{ children: `===${randomValue}===` },
								null,
								null,
								null
							)
						]
					},
					null,
					null,
					null
				);
			}

			let result;

			if (createVNode) {
				performance.mark('start');
				for (let i = 0; i < 100; i++) {
					root.render(
						createVNode(component2, { randomValue: i }, null, null, null)
					);
				}
				performance.mark('stop');
			} else {
				performance.mark('start');
				for (let i = 0; i < 100; i++) {
					root.render(createElement(component1, { randomValue: i }));
				}
				performance.mark('stop');
			}

			performance.measure(measureName, 'start', 'stop');
			measureMemory();
		</script>
	</body>
</html>
